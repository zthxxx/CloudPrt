webpackJsonp([1],{"0KMf":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=u(i("exGp")),a=u(i("Dd8w")),n=i("NYxO"),l=u(i("M4fF")),o=i("iltX"),r=i("gyMJ"),d=i("S8x/"),c=i("4/BI");function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"settle-bill",props:{point:{required:!0,default:null},fileList:{type:Array,required:!0},updateFiles:{type:Function}},data:()=>({dispatch:!1,dispatching:{nickname:"",phone:"",address:"",message:""},formatCNY:c.formatCNY}),computed:(0,a.default)({},(0,n.mapState)("user",["user"]),{bills(){let{items:t,units:e}=this.getItems(),i=[],s=t=>t>0?`${(0,c.formatCNY)(t)}/张`:null;for(let a in t)if(t[a]>0){let n=t[a],l=e[a];i.push({name:a,unit:s(l),count:n,cost:n*l})}return i},finalMoney(){let t,e=0,i=this.getReducedMoney();for(let t of this.bills)e+=t.cost;return t=e,i.hasReduced&&(t-=i.money),this.dispatch&&(t+=this.point.dispatch.distributionCharge),{originMoney:e,amount:t=t<this.point.minCharge?this.point.minCharge:t}}}),watch:{user:{handler({nickname:t,username:e,address:i}){this.dispatching=(0,a.default)({},this.dispatching,{phone:e,nickname:t,address:i})}}},mounted(){this.user&&(this.dispatching={nickname:l.default.get(this.user,"nickname"),phone:l.default.get(this.user,"username"),address:l.default.get(this.user,"address"),message:""})},methods:{getReducedMoney:()=>({money:0,hasReduced:!1}),getSelectCoupon:()=>({couponId:null,couponName:null}),calcSidesCount(t){let e=0,i=0,s=t.endPage-t.startPage+1,a=t.row*t.col,n=Math.ceil(s/a);return 1===t.side?e+=n:2===t.side&&(e+=n%2,i+=Math.floor(n/2)),[e*=t.copies,i*=t.copies]},getItems(){let t={},e={};const i=this.point.price;for(let s of this.fileList){if(!s.print)continue;if("success"!==s.status)continue;let a=s.print,{size:n,caliper:o,color:r}=a,c=l.default.get(l.default.find(i,{size:n,caliper:o}),["money",r]);if(!c)return{items:{},units:{}};let u=t=>(0,d.getBillingItem)({size:n,caliper:o,color:r,side:t}),p=u(1),f=u(2),[v,_]=this.calcSidesCount(a),h="oneside"in c?p:f;t[h]=l.default.get(t,h,0)+v,t[f]=l.default.get(t,f,0)+_,e[p]=l.default.get(c,"oneside",0),e[f]=l.default.get(c,"duplex",0)}return{items:t,units:e}},getOrder(){let t={pointID:this.point.id,files:this.fileList.map(t=>(0,a.default)({fileID:t.raw.md5,fileName:t.name},t.print)),money:this.finalMoney.amount};return this.dispatch&&(t.dispatching=this.dispatching),t},verifyOrder(){var t=this;return(0,s.default)(function*(){t.user||(yield t[o.POPUP_LOGIN]());let e=t.getOrder(),{orderID:i}=yield(0,r.verifyOrder)(e);yield t[o.POPUP_PAY]({orderID:i,money:(0,c.formatCNY)(t.finalMoney.amount)}),t.paidRefresh()})()},paidRefresh(){this.updateFiles([]),this.$router.push({name:"user-order"})}}}},"1kh3":function(t,e){},"1vkq":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=i("M4fF"),n=(s=a)&&s.__esModule?s:{default:s};e.default={name:"linkage-select",model:{prop:"focused",event:"currents"},props:{focused:{type:Array,default:()=>[]},placeholders:{type:Array,default:()=>[]},linkageDatas:{type:[Array,Object],default:()=>({})},defaultSelected:{type:Boolean,default:!0},firstMountEmit:{type:Boolean,default:!0}},data(){return{currents:[...this.focused],firstMount:this.firstMountEmit}},computed:{layerData:function(){let t=[],e=this.linkageDatas,i=this.currents;if(n.default.isEmpty(e))return t=[[]];let s=0;for(;e instanceof Array;){let a=i[s],l=e;if(t.push(e.map(t=>(a in t&&(l=t[a]),n.default.findKey(t)))),l===e){let a=n.default.findKey(e[0]);if(i.splice(s,i.length),e=e[0][a],!this.defaultSelected){for(;e instanceof Array;)t.push([]),e=n.default.find(e[0]);return t}i.push(a)}else e=l;s++}return n.default.isEqual(i,this.focused)&&!this.firstMount||(this.firstMount=!1,this.$emit("currents",[...i]),this.$emit("track",e)),t}},watch:{focused:{handler(t){n.default.isEqual(this.currents,t)||(this.currents=[...t])}},deep:!0}}},"2/yl":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("UCFC");i.o(s,"default")&&i.d(e,"default",function(){return s.default})},"278Q":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("WO9J"),a=i("4/BI");e.default={name:"shop-point-card",props:{point:{type:Object,required:!0},selectedID:{default:null}},data:()=>({roleImage:{ATM:s.ATM,DISPATCHING:s.printPoint},typeMap:{mono:"黑白",colorful:"彩色",oneside:"单面",duplex:"双面"}}),methods:{isColorful(t){let e=[];return t.mono&&e.push("黑白打印"),t.colorful&&e.push("彩色打印"),e},getFormatTakeTime(t){let e=new Intl.NumberFormat("en-US",{useGrouping:!1,minimumIntegerDigits:2}),i=t.map(t=>e.format(t));return`${i.slice(0,2).join(":")}-${i.slice(2,4).join(":")}`},selected(){this.$emit("select",this.point)},getPriceList(t){let e=t=>t>0?`${(0,a.formatCNY)(t)} / 张`:null,i=this.typeMap,s=[];for(let a of t){let{size:t,caliper:n,money:l}=a,o=`${t} ${n}纸`;for(let t in l)for(let a in l[t]){let n=l[t][a];s.push({type:`${o}${i[t]}${i[a]}`,price:e(n)})}}return s}}}},"4WDv":function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"area-select"},t._l(t.layerData,function(e,s){return i("el-select",{key:s,staticClass:"selecter",attrs:{placeholder:t.placeholders[s]?t.placeholders[s]:"请选择"},model:{value:t.currents[s],callback:function(e){t.$set(t.currents,s,e)},expression:"currents[index]"}},t._l(e,function(t){return i("el-option",{key:s+t,attrs:{label:t,value:t}})}))}))},staticRenderFns:[]};e.a=s},"5K1E":function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"upload-dragger",class:{dragover:t.dragover},on:{drop:function(e){return e.preventDefault(),e.stopPropagation(),t.onDrop(e)},dragover:function(e){return e.preventDefault(),t.onDragover(e)},dragleave:function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==e.currentTarget)return null;t.dragover=!1}}},[t._t("default")],2)},staticRenderFns:[]};e.a=s},"5vdu":function(t,e){},AMLB:function(t,e){},BCHJ:function(t,e,i){"use strict";var s=i("CkBH"),a=i.n(s),n=i("ZCVy");var l=function(t){i("vMrb")},o=i("VU/8")(a.a,n.a,!1,l,"data-v-5e76b338",null);e.default=o.exports},CkBH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=m(i("exGp")),a=m(i("Dd8w")),n=i("NYxO"),l=m(i("M4fF")),o=m(i("yiCB")),r=m(i("oZT0")),d=m(i("yDxl")),c=m(i("UfA/")),u=m(i("e1pi")),p=m(i("WZ6Z")),f=i("iltX"),v=i("gyMJ"),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("Du/2")),h=i("gXyJ");function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:"print",components:{boxCard:o.default,linkageSelect:r.default,ShopPointList:d.default,uploadBox:c.default,printFileList:u.default,settleBill:p.default},data:()=>({addresses:{},points:[]}),computed:(0,a.default)({},(0,n.mapState)("print",["fileList"]),(0,h.mapModel)("print",{focusAddress:_.SELECT_ADDRESS,focusPoint:_.SELECT_POINT})),mounted(){this.initData()},methods:(0,a.default)({},(0,n.mapMutations)("print",{updateSetting:_.SET_PRINTING,commitFiles:_.UPDATE_FILES}),{initData(){var t=this;return(0,s.default)(function*(){t.addresses=yield(0,v.getAddresses)()})()},setPoints(t){var e=this;return(0,s.default)(function*(){const i=yield(0,v.getPoints)(t);i.length||e.$notify.warning({title:"打印点为空",message:"该处地址下暂时没有打印点哟，敬请期待~"});const s={RUNNING:"正在运营",SUMMER_HOLIDAY:"暑假休息",WINTER_HOLIDAY:"寒假休息",CLOSE_DOWN:"关门停业"};for(let t of i){t.status||(t.status="RUNNING"),t.pointType||(t.pointType="ATM"),t.running="RUNNING"===t.status,t.rest_message=s[t.status],t.colorType={mono:!1,colorful:!1};for(let e of t.price){let{money:i}=e;"mono"in i&&(t.colorType.mono=!0),"colorful"in i&&(t.colorType.colorful=!0)}}e.points=i})()},removeFile(t){this.$refs.uploader.transmitRemove(t)},handlePreview(t){this[f.POPUP_PREVIEW]({price:l.default.get(this.focusPoint,"price"),file:t,updateSetting:this.updateSetting})}})}},D0dC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"upload-drag-box",props:{disabled:Boolean},data:()=>({dragover:!1}),methods:{onDragover(){this.disabled||(this.dragover=!0)},onDrop(t){this.disabled||(this.dragover=!1,this.$emit("file",t.dataTransfer.files))}}}},Iyy4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("BCHJ");i.o(s,"default")&&i.d(e,"default",function(){return s.default})},K8Xz:function(t,e){},L4js:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(i("exGp")),a=r(i("M4fF")),n=r(i("amSP")),l=i("7mV8"),o=i("gyMJ");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"upload-box",components:{uploadDragBox:n.default},props:{sizeKbLimit:{type:Number,default:20480},fileList:{type:Array,required:!0},updateFiles:{type:Function}},data:()=>({action:"",payload:{},supportFormat:["doc","docx","ppt","pptx","xls","xlsx","pdf"]}),methods:{transmitFiles(t){this.$refs.uploader.$refs["upload-inner"].uploadFiles(t)},transmitRemove(t){this.$refs.uploader.handleRemove(t)},getUploadURL({md5:t,name:e}){var i=this;return(0,s.default)(function*(){let{url:s}=yield(0,o.getFileURL)({md5:t,name:e});i.action=s})()},setPageInfo(t){var e=this;return(0,s.default)(function*(){if("success"===t.status&&!a.default.has(t,"pageInfo")){let{pageCount:i,isVertical:s}=yield(0,o.getPage)({md5:t.raw.md5,name:t.name});e.$set(t,"pageInfo",{pageCount:i,isVertical:s})}})()},fileSizeLimit(t,e){if(t.size/1024>e)throw this.$notify.error({title:"请不要上传太大的文件",message:`该文件 ${t.name} 大小超过 ${e/1024}MB 限制，无法上传`}),new Error("stop-upload Size too large")},fileFormatCheck(t){let e=this.supportFormat;if(t.extension=t.name.split(".").pop().toLowerCase(),!t.name.match(/\./)||e.findIndex(e=>e===t.extension)<0)throw this.$notify.error({title:`暂不支持此文件格式: ${t.extension}`,message:`当前仅支持 ${e.join("，")} 等格式。`}),new Error("stop-upload Format not support");if(t.name.match(/^~\$/))throw this.$notify.error({title:'该文件为 "影子文件"，无法打印',message:`文件 ${t.name} 为"影子文件"，无法添加到打印列表。请添加相同目录下不以 "~$" 开头的同名文件，它才是本尊！`}),new Error("stop-upload Office Temp")},fileExistCheck(t){var e=this;return(0,s.default)(function*(){let i=yield(0,o.getPage)(t);if("EXISTED"===i.state){let{pageCount:s,isVertical:a}=i;throw t.pageInfo={pageCount:s,isVertical:a},e.$refs.uploader.handleStart(t),new Error("stop-upload File existed")}})()},onBeforeUpload(t){var e=this;return(0,s.default)(function*(){e.fileSizeLimit(t,e.sizeKbLimit),e.fileFormatCheck(t),t.md5=yield(0,l.getFileMD5)(t),t.origin="本地上传",yield e.fileExistCheck(t),yield e.getUploadURL(t)})()},onChange(t,e){var i=this;return(0,s.default)(function*(){yield i.setPageInfo(t),a.default.has(t,["raw","pageInfo"])||i.updateFiles(e)})()},onProgress(t,e){let{loaded:i,total:s,timeStamp:n}=t,l=a.default.get(e,"loaded",{loaded:i,total:s,timeStamp:n}),o=n>l.timeStamp?(i-l.loaded)/1024/((n-l.timeStamp)/1e3):0,r=(s-i)/1024/(o||1);this.$set(e,"loaded",{loaded:i,timeStamp:n}),this.$set(e,"speed",o.toFixed(2)),this.$set(e,"remain",r.toFixed(0))},onErrorUpload(t){console.error("err-upload",t),this.$notify.error({title:"上传出错",message:"请检查网络和文件类型"})},onRemoveFile(t,e){this.updateFiles(e)}}}},LBEo:function(t,e){},Mwod:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-box-out"},[i("upload-drag-box",{on:{file:t.transmitFiles}},[t._t("default"),t._v(" "),i("el-upload",{ref:"uploader",staticClass:"upload",attrs:{multiple:"",action:t.action,data:t.payload,"show-file-list":!1,"file-list":t.fileList,"on-change":t.onChange,"before-upload":t.onBeforeUpload,"on-progress":t.onProgress,"on-remove":t.onRemoveFile,"on-error":t.onErrorUpload}},[i("div",{staticClass:"upload-btn"},[t.fileList.length?i("span",{staticClass:"upload-title"},[t._v("继续添加文件")]):i("span",{staticClass:"upload-title"},[t._v("添加文件")]),t._v(" "),i("br"),t._v(" "),i("span",{staticClass:"upload-text"},[t._v("点击按钮或者把文件拖放到这里")])]),t._v(" "),i("footer",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("p",[t._v("已支持的格式："+t._s(t.supportFormat.join(",")))]),t._v(" "),i("p",[t._v("请勿上传包含侵权、色情、暴恐、反动等违法内容的文档")])])])],2)],1)},staticRenderFns:[]};e.a=s},PMxh:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("article",{staticClass:"print-file-list"},t._l(t.fileList,function(e,s){return i("print-file-item",{key:e.name+"_"+s,attrs:{index:s+1,file:e,preSetting:e.print,price:t.point&&t.point.price,handleRemove:t.handleRemove,handlePreview:t.handlePreview},on:{update:t.updateSetting}})}))},staticRenderFns:[]};e.a=s},SaVE:function(t,e){},UCFC:function(t,e,i){"use strict";var s=i("jjdT"),a=i.n(s),n=i("aK0l");var l=function(t){i("K8Xz")},o=i("VU/8")(a.a,n.a,!1,l,"data-v-1ad49808",null);e.default=o.exports},"UfA/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("WgzN");i.o(s,"default")&&i.d(e,"default",function(){return s.default})},UhHz:function(t,e,i){"use strict";var s=i("hlmY"),a=i.n(s),n=i("ds85");var l=function(t){i("AMLB")},o=i("VU/8")(a.a,n.a,!1,l,"data-v-23e48fa4",null);e.default=o.exports},WZ6Z:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mpBm");i.o(s,"default")&&i.d(e,"default",function(){return s.default})},WgzN:function(t,e,i){"use strict";var s=i("L4js"),a=i.n(s),n=i("Mwod");var l=function(t){i("5vdu")},o=i("VU/8")(a.a,n.a,!1,l,"data-v-55609a50",null);e.default=o.exports},Y0D5:function(t,e,i){"use strict";var s=i("1vkq"),a=i.n(s),n=i("4WDv");var l=function(t){i("ds/z")},o=i("VU/8")(a.a,n.a,!1,l,"data-v-e717a478",null);e.default=o.exports},ZCVy:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"float-fade"}},[i("article",{key:"print",attrs:{id:"printpage"}},[i("box-card",{attrs:{title:"打印点"}},[t.focusPoint?t._e():i("div",{staticClass:"selector-group"},[i("span",{staticClass:"tip"},[t._v("请选择目标打印点: ")]),t._v(" "),i("linkage-select",{attrs:{linkageDatas:t.addresses},on:{track:t.setPoints},model:{value:t.focusAddress,callback:function(e){t.focusAddress=e},expression:"focusAddress"}})],1),t._v(" "),i("shop-point-list",{attrs:{points:t.points},model:{value:t.focusPoint,callback:function(e){t.focusPoint=e},expression:"focusPoint"}})],1),t._v(" "),i("box-card",{attrs:{title:"文件列表 ("+t.fileList.length+")",noPadding:!0}},[i("span",{staticClass:"file-tips"},[i("transition",{attrs:{name:"float-fade"}},[t.fileList.length?t._e():i("header",[t._v("\n            请从本地上传文件 或\n            "),i("router-link",{attrs:{to:{name:"library"}}},[i("span",{staticClass:"to-library"},[t._v("从校园文库添加文件")])])],1)])],1),t._v(" "),i("upload-box",{ref:"uploader",attrs:{fileList:t.fileList,updateFiles:t.commitFiles}},[i("print-file-list",{attrs:{point:t.focusPoint,fileList:t.fileList,updateSetting:t.updateSetting,handleRemove:t.removeFile,handlePreview:t.handlePreview}})],1)],1),t._v(" "),i("box-card",{attrs:{title:"结算",noPadding:!0}},[t.focusPoint?t.fileList.length?i("settle-bill",{attrs:{point:t.focusPoint,fileList:t.fileList,updateFiles:t.commitFiles}}):i("div",{staticClass:"account-tips"},[t._v("请添加文件")]):i("div",{staticClass:"account-tips"},[t._v("请在上面的打印点板块选择打印点")])],1)],1)])},staticRenderFns:[]};e.a=s},aK0l:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"left-fade"}},[i("section",{staticClass:"print-file-item"},[i("div",{staticClass:"print-file",class:{"file-upload":!t.upsuccess}},[t.index?i("div",{staticClass:"valid-index"},[t._v(t._s("#"+t.index))]):t._e(),t._v(" "),t.upsuccess?t._e():i("div",{staticClass:"processor"},[i("div",{staticClass:"process-bar",style:{width:t.file.percentage+"%"}}),t._v(" "),i("div",{staticClass:"loading-info"},[i("div",{staticClass:"uploading"},[100!=t.file.percentage?[i("div",[t._v("正在上传")]),t._v(" "),i("div",{staticClass:"percentage"},[i("span",{staticClass:"loading"},[i("spinDot")],1),t._v("\n                "+t._s(t.file.percentage.toFixed(1))+"%\n              ")]),t._v(" "),i("div",{staticClass:"speed"},[t._v("剩余 "+t._s(t.file.remain||"...")+" 秒 / "+t._s(t.file.speed||0)+" kb/s")])]:[i("div",[t._v("上传完毕")]),t._v(" "),i("div",{staticClass:"analysing"},[t._v("正在分析...")])]],2)])]),t._v(" "),i("div",{staticClass:"logo-holder"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:t.fileIcon[t.file.raw.extension]}}),t._v(" "),t.upsuccess?i("div",[t._v(t._s(t.file.pageInfo.pageCount+"页"))]):i("div",[t._v(t._s(Math.ceil(t.file.size/1024))+"kb")])])]),t._v(" "),i("div",{staticClass:"file-info"},[i("div",{staticClass:"name"},[t._v(t._s(t.file.name))]),t._v(" "),i("div",{staticClass:"source"},[i("span",[t._v("来源："),i("span",[t._v(t._s(t.file.raw.origin))])])])]),t._v(" "),t.upsuccess?i("div",{staticClass:"fade-in"},[i("div",{staticClass:"delete"},[i("div",{staticClass:"control"},[t._t("control",[i("div",{staticClass:"tip"},[t._v("共需打印 "+t._s(t.total)+" 张纸")]),t._v(" "),i("div",{staticClass:"right-btn"},[i("el-button",{staticClass:"del-btn",attrs:{icon:"fa-file-text-o"},on:{click:function(e){t.handlePreview(t.file)}}},[t._v(" 打印预览\n                ")])],1),t._v(" "),i("div",{staticClass:"right-btn"},[i("el-button",{staticClass:"del-btn",attrs:{icon:"delete2"},on:{click:function(e){t.handleRemove(t.file)}}},[t._v(" 移除文件\n                ")])],1)])],2)]),t._v(" "),i("div",{staticClass:"print-choice"},[i("ul",[i("li",[i("div",[t._v("色彩")]),t._v(" "),i("div",{staticClass:"selectors"},[i("el-select",{staticClass:"colors",model:{value:t.setting.color,callback:function(e){t.$set(t.setting,"color",e)},expression:"setting.color"}},[i("el-option",{attrs:{label:"黑白",value:"mono",disabled:!("mono"in t.colorable)}}),t._v(" "),i("el-option",{attrs:{label:"彩色",value:"colorful",disabled:!("colorful"in t.colorable)}})],1)],1)]),t._v(" "),i("li",[i("div",[t._v("单双面")]),t._v(" "),i("div",{staticClass:"selectors"},[i("el-select",{staticClass:"sides",model:{value:t.setting.side,callback:function(e){t.$set(t.setting,"side",e)},expression:"setting.side"}},[i("el-option",{attrs:{label:"单面",value:1,disabled:!("oneside"in t.sideable)}}),t._v(" "),i("el-option",{attrs:{label:"双面",value:2,disabled:!("duplex"in t.sideable)}})],1)],1)]),t._v(" "),i("li",[i("div",[t._v("多合一")]),t._v(" "),i("div",{staticClass:"selectors"},[i("el-select",{staticClass:"layouts",model:{value:t.layout,callback:function(e){t.layout=e},expression:"layout"}},[i("el-option",{attrs:{label:"1合1",value:1}}),t._v(" "),i("el-option",{attrs:{label:"2合1",value:2}}),t._v(" "),t.file.pageInfo.isVertical?t._e():[i("el-option",{attrs:{label:"4合1",value:4}}),t._v(" "),i("el-option",{attrs:{label:"6合1",value:6}}),t._v(" "),i("el-option",{attrs:{label:"8合1",value:8}}),t._v(" "),i("el-option",{attrs:{label:"9合1",value:9}})]],2)],1)]),t._v(" "),i("li",[i("div",[t._v("份数")]),t._v(" "),i("div",{staticClass:"selectors"},[i("el-input-number",{staticClass:"copies",attrs:{min:1,max:1e3},model:{value:t.setting.copies,callback:function(e){t.$set(t.setting,"copies",e)},expression:"setting.copies"}})],1)])])]),t._v(" "),i("div",{staticClass:"setting"},[i("div",{staticClass:"print-area"},[i("span",{staticClass:"area-tip"},[t._v("打印范围 ")]),t._v(" "),i("span",{staticClass:"lingkage-are"},[i("el-input-number",{staticClass:"print-area-input",attrs:{controls:!1,min:1,max:t.setting.endPage},model:{value:t.setting.startPage,callback:function(e){t.$set(t.setting,"startPage",e)},expression:"setting.startPage"}}),t._v(" "),i("span",[t._v("-")]),t._v(" "),i("el-input-number",{staticClass:"print-area-input",attrs:{controls:!1,min:t.setting.startPage,max:t.file.pageInfo.pageCount},model:{value:t.setting.endPage,callback:function(e){t.$set(t.setting,"endPage",e)},expression:"setting.endPage"}})],1)]),t._v(" "),i("div",{staticClass:"print-area"},[i("span",[t._v("纸张")]),t._v(" "),i("el-select",{staticClass:"sizeside",model:{value:t.sizeside,callback:function(e){t.sizeside=e},expression:"sizeside"}},[t._l(t.price,function(t){var e=t.size,s=t.caliper;return i("el-option",{key:e+" "+s,attrs:{label:e+" "+s+" 白纸",value:JSON.stringify({size:e,caliper:s})}})}),t._v(" "),t.price?t._e():i("el-option",{attrs:{label:t.setting.size+" "+t.setting.caliper+" 白纸",value:t.sizeside}})],2)],1)])]):t._e()])])])},staticRenderFns:[]};e.a=s},amSP:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("D0dC"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);var l=i("5K1E");var o=function(t){i("1kh3")},r=i("VU/8")(a.a,l.a,!1,o,"data-v-f0cac12a",null);e.default=r.exports},"d6Z+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=i("2/yl"),n=(s=a)&&s.__esModule?s:{default:s};e.default={name:"print-file-list",components:{printFileItem:n.default},props:{point:{required:!1,default:null},fileList:{type:Array,required:!0},updateSetting:{type:Function,default:()=>{}},handleRemove:{type:Function,required:!0},handlePreview:{type:Function,required:!0}},data:()=>({})}},"ds/z":function(t,e){},ds85:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("article",{staticClass:"print-point-list"},[t.selectedID?i("header",{staticClass:"point-detial-title"},[i("el-button",{staticClass:"back",attrs:{type:"text",icon:"fa-chevron-left"},on:{click:function(e){t.selectPoint(null)}}},[t._v("选择其他打印点\n    ")]),t._v(" "),i("span",{staticClass:"tip"},[t._v(" 已选择该打印点: ")])],1):t._e(),t._v(" "),t._l(t.points,function(e,s){return i("shop-point-card",{key:s,attrs:{point:e,selectedID:t.selectedID},on:{select:t.selectPoint}})})],2)},staticRenderFns:[]};e.a=s},e1pi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("wTZ0");i.o(s,"default")&&i.d(e,"default",function(){return s.default})},hlmY:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(i("M4fF")),a=n(i("xTsN"));function n(t){return t&&t.__esModule?t:{default:t}}e.default={name:"shop-point-list",model:{prop:"focusPoint",event:"focus"},components:{shopPointCard:a.default},props:{focusPoint:{type:null},points:{type:Array,required:!0}},data(){return{selectedID:s.default.get(this.focusPoint,"id",null)}},methods:{selectPoint(t){this.selectedID=s.default.get(t,"id",null),this.$emit("focus",t)}}}},jjdT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=c(i("woOf")),a=c(i("mvHQ")),n=c(i("Dd8w")),l=c(i("M4fF")),o=i("WO9J"),r=c(i("TCwp")),d=i("S8x/");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"print-file-item",components:{spinDot:r.default},props:{price:{default:null},index:{type:Number,default:null},file:{type:Object,required:!0},preSetting:{type:Object,default:()=>({copies:1,size:"A4",caliper:"70g",color:"mono",side:1,row:1,col:1,startPage:1,endPage:1})},handleRemove:{type:Function},handlePreview:{type:Function}},data(){return{setting:(0,n.default)({},(0,d.checkset)(this.price,this.preSetting)),layouts:{1:{row:1,col:1},2:{row:2,col:1},4:{row:2,col:2},6:{row:3,col:2},8:{row:4,col:2},9:{row:3,col:3}},sideMap:d.sideMap,fileIcon:o.icons}},computed:{upsuccess(){let t=this.file;return"success"===l.default.get(t,"status")&&l.default.get(t,["pageInfo","pageCount"])},colorable(){let t=this.setting;if(!this.price)return{};for(let e of this.price){let{size:i,caliper:s,money:a}=e;if(t.size===i&&t.caliper===s)return a}return{}},sideable(){let t=this.setting,e=l.default.get(this.colorable,t.color,{});return l.default.has(e,l.default.invert(this.sideMap)[t.side])||(t.side=l.default.get(this.sideMap,l.default.keys(e).shift(),1)),e},sizeside:{get(){return(0,a.default)({size:this.setting.size,caliper:this.setting.caliper})},set(t){this.setting=(0,d.checkset)(this.price,(0,n.default)({},this.setting,JSON.parse(t)))}},layout:{get(){let t=this.setting;return t.row*t.col},set(t){let{row:e,col:i}=this.layouts[t];this.file.pageInfo.isVertical&&([e,i]=[i,e]),(0,s.default)(this.setting,{row:e,col:i})}},total(){let t=this.setting;return Math.ceil((t.endPage-t.startPage+1)/t.side/this.layout)*t.copies}},watch:{setting:{handler(t){for(let e of l.default.keys(this.preSetting))if(l.default.get(t,e)!==this.preSetting[e]){this.$emit("update",{uid:this.file.uid,setting:t});break}},deep:!0},price:{handler(t){t&&(this.setting=(0,d.checkset)(t,this.setting))},deep:!0},preSetting:{handler(t){this.setting=(0,n.default)({},t)},deep:!0}}}},k73E:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.selectedID&&t.selectedID!==t.point.id?t._e():i("article",{key:""+t.point.pointName+t.point.id,class:{"print-point-item":!0,"no-running":!t.point.running,"zoom-in":!t.selectedID,selected:t.selectedID===t.point.id},on:{click:function(e){t.point.running&&t.selected(t.point.id)}}},[i("section",{staticClass:"box"},[i("div",{staticClass:"info"},[i("div",{staticClass:"pic-div"},[i("img",{attrs:{src:t.point.image||t.roleImage[t.point.pointType]}})]),t._v(" "),i("div",{staticClass:"detial-div"},[i("header",{staticClass:"point-name"},[t._v(t._s(t.point.pointName))]),t._v(" "),i("div",{staticClass:"addr"},[i("i",{staticClass:"el-icon-fa-map-marker"}),t._v(t._s(t.point.address)+"\n          ")]),t._v(" "),i("div",{staticClass:"print-type "},[t._v("打印类型："+t._s(t.isColorful(t.point.colorType).join(" ")))]),t._v(" "),i("div",{staticClass:"take-time"},[t.point.delivery_scope?[t._v("\n              配送时间："),i("span",[t._v(t._s(t.point.delivery_time))])]:[t._v("\n              自助取件时间："),i("span",[t._v(t._s(t.getFormatTakeTime(t.point.takeTime)))])]],2),t._v(" "),i("div",{staticClass:"ultra-service"},[t._v("\n            配送范围："),t.point.delivery_scope?i("span",[t._v(t._s(t.point.delivery_scope))]):i("span",{staticClass:"gray-text"},[t._v("（本打印点仅提供自提服务）")])]),t._v(" "),i("div",[t._v("联系电话："+t._s(t.point.phone))])])]),t._v(" "),t.selectedID===t.point.id?i("div",{staticClass:"price"},[t._m(0),t._v(" "),i("div",{staticClass:"price-list"},t._l(t.getPriceList(t.point.price),function(e,s){return i("div",{key:s,class:{"price-item":!0,invalid:!e.price}},[i("div",{staticClass:"price-name"},[t._v(t._s(e.type))]),t._v(" "),i("div",{staticClass:"money"},[t._v(t._s(e.price||"不支持"))])])}))]):t._e()]),t._v(" "),t.point.running?i("footer",{staticClass:"announce"},[t._v(t._s(t.point.message))]):i("footer",{staticClass:"no-running-tip"},[i("div",{staticClass:"title"},[t._v(t._s(t.point.rest_message))]),t._v(" "),i("div",{staticClass:"msg"},[t._v(t._s(t.point.message))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"price-title"},[e("i",{staticClass:"el-icon-fa-list-ul"}),this._v("价格表\n      ")])}]};e.a=s},mpBm:function(t,e,i){"use strict";var s=i("0KMf"),a=i.n(s),n=i("v81+");var l=function(t){i("LBEo"),i("SaVE")},o=i("VU/8")(a.a,n.a,!1,l,"data-v-4e3f9732",null);e.default=o.exports},oZT0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Y0D5");i.o(s,"default")&&i.d(e,"default",function(){return s.default})},p3up:function(t,e){},"v81+":function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"account"},[i("div",{staticClass:"print-project"},[i("div",{staticClass:"left-part"},[t._m(0),t._v(" "),i("div",{staticClass:"project"},[i("table",{staticClass:"project-account"},[i("tbody",[t._m(1),t._v(" "),t._l(t.bills,function(e){return e.unit&&e.count?i("tr",{key:e.name},[i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",[t._v(t._s(e.unit))]),t._v(" "),i("td",[t._v(t._s(e.count))]),t._v(" "),i("td",[t._v(t._s(t.formatCNY(e.cost)))])]):t._e()})],2)])]),t._v(" "),i("div",{staticClass:"coupon"},[t._v("\n        使用优惠券：\n        "),i("el-select",{staticClass:"coupon-select",attrs:{value:"",placeholder:"暂无可使用的优惠券"}})],1)]),t._v(" "),i("div",{staticClass:"right-part"},[i("div",{staticClass:"top"},[i("div",{staticClass:"title"},[t._v("\n          选择取件方式\n        ")]),t._v(" "),i("el-radio-group",{model:{value:t.dispatch,callback:function(e){t.dispatch=e},expression:"dispatch"}},[i("el-radio",{staticClass:"radio",attrs:{label:!1}},[t._v("到打印点自取")]),t._v(" "),i("br"),t._v(" "),i("el-radio",{staticClass:"radio",attrs:{label:!0,disabled:!t.point.delivery_scope||t.finalMoney.originMoney<t.point.dispatch.distributionStart}},[t._v("\n            送件上门\n            "+t._s(t.point.delivery_scope?"（"+t.formatCNY(t.point.dispatch.distributionStart)+" 起送，配送费 "+t.formatCNY(t.point.dispatch.distributionCharge)+"）":"（本打印点暂时不支持）")+"\n          ")])],1),t._v(" "),i("transition",{attrs:{name:"left-fade"}},[t.dispatch?i("div",{staticClass:"dispatch"},[i("el-input",{staticClass:"dispatch-info nickname",attrs:{placeholder:"请输入姓名"},model:{value:t.dispatching.nickname,callback:function(e){t.$set(t.dispatching,"nickname",e)},expression:"dispatching.nickname"}}),t._v(" "),i("el-input",{staticClass:"dispatch-info phone",attrs:{placeholder:"请输入手机号"},model:{value:t.dispatching.phone,callback:function(e){t.$set(t.dispatching,"phone",e)},expression:"dispatching.phone"}}),t._v(" "),i("el-input",{staticClass:"dispatch-info address",attrs:{placeholder:"请输入配送地址"},model:{value:t.dispatching.address,callback:function(e){t.$set(t.dispatching,"address",e)},expression:"dispatching.address"}}),t._v(" "),i("el-input",{staticClass:"dispatch-info message",attrs:{placeholder:"请输入留言"},model:{value:t.dispatching.message,callback:function(e){t.$set(t.dispatching,"message",e)},expression:"dispatching.message"}})],1):t._e()])],1),t._v(" "),i("div",{staticClass:"account-info"},[i("div",{staticClass:"original-money"},[t._v("原价："),i("span",[t._v(t._s(t.formatCNY(t.finalMoney.originMoney)))])]),t._v(" "),i("div",{staticClass:"final-money"},[t._v("应付："),i("span",[t._v(t._s(t.formatCNY(t.finalMoney.amount)))])]),t._v(" "),i("el-button",{staticClass:"to-submit",on:{click:t.verifyOrder}},[t._v("确认下单")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"print-place"},[e("span",{staticClass:"title"},[this._v("打印点：")]),e("span",{staticClass:"place-name"},[this._v("示例打印点")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("计费项目")]),this._v(" "),e("td",[this._v("单价")]),this._v(" "),e("td",[this._v("数量")]),this._v(" "),e("td",[this._v("小计")])])}]};e.a=s},vMrb:function(t,e){},wTZ0:function(t,e,i){"use strict";var s=i("d6Z+"),a=i.n(s),n=i("PMxh"),l=i("VU/8")(a.a,n.a,!1,null,null,null);e.default=l.exports},xTsN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("278Q"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);var l=i("k73E");var o=function(t){i("p3up")},r=i("VU/8")(a.a,l.a,!1,o,"data-v-19db9873",null);e.default=r.exports},yDxl:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("UhHz");i.o(s,"default")&&i.d(e,"default",function(){return s.default})}});